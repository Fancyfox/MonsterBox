{
  "code": "import GameDefine from \"./GameDefine\";\r\nimport GameManager from \"./GameManager\";\r\nexport default class EffectUtil {\r\n    constructor() {\r\n        this.effects = {};\r\n    }\r\n    static get instance() {\r\n        if (!this._instance)\r\n            this._instance = new EffectUtil();\r\n        return this._instance;\r\n    }\r\n    loadEffect(tag, recycleDelay = 1000, pos, parent) {\r\n        return new Promise(resolve => {\r\n            if (!this.effects[tag])\r\n                this.effects[tag] = [];\r\n            let arr = this.effects[tag];\r\n            if (arr.length > 0) {\r\n                let p = arr.pop();\r\n                (parent || GameManager.instance().scene_3d).addChild(p);\r\n                p.transform.position = pos;\r\n                if (recycleDelay != -1)\r\n                    Laya.timer.once(recycleDelay, this, a => this.recycleEffect(a), [p]);\r\n                resolve(p);\r\n            }\r\n            else {\r\n                Laya.Sprite3D.load(GameDefine.prefabRoot + tag + '.lh', Laya.Handler.create(null, (res) => {\r\n                    let ins = Laya.Sprite3D.instantiate(res);\r\n                    (parent || GameManager.instance().scene_3d).addChild(ins);\r\n                    ins.transform.position = pos;\r\n                    if (recycleDelay != -1)\r\n                        Laya.timer.once(recycleDelay, this, a => this.recycleEffect(a), [ins]);\r\n                    resolve(ins);\r\n                }));\r\n            }\r\n        });\r\n    }\r\n    recycleEffect(p) {\r\n        p.removeSelf();\r\n        if (!this.effects[p.name])\r\n            return;\r\n        this.effects[p.name].push(p);\r\n    }\r\n    clear() {\r\n        for (const k in this.effects) {\r\n            if (this.effects.hasOwnProperty(k)) {\r\n                const arr = this.effects[k];\r\n                arr.map(p => p.destroy());\r\n            }\r\n        }\r\n        this.effects = {};\r\n    }\r\n}\r\n",
  "references": [
    "D:/WorkSpace/Laya2.6.1/MonsterBox/src/script/Singleton/GameData.ts",
    "D:/WorkSpace/Laya2.6.1/MonsterBox/src/script/Singleton/GameDefine.ts",
    "D:/WorkSpace/Laya2.6.1/MonsterBox/src/script/Singleton/GameManager.ts"
  ]
}
